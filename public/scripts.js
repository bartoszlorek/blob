!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e){t.exports=PIXI},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e}return r(t,[{key:"update",value:function(){}},{key:"obstruct",value:function(){}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EDGE_TABLE=e.EDGE=void 0;var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(15),u=(r=i)&&r.__esModule?r:{default:r};var a=e.EDGE={TOP:Symbol("top"),RIGHT:Symbol("right"),BOTTOM:Symbol("bottom"),LEFT:Symbol("left")},l=(e.EDGE_TABLE=[a.TOP,a.RIGHT,a.BOTTOM,a.LEFT],function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pos=new u.default(e,n),this.vel=new u.default(0,0),this.size=r,this.parent=null,this.traits=[]}return o(t,[{key:"intersection",value:function(t){return this.top<t.bottom&&this.bottom>t.top&&this.right>t.left&&this.left<t.right}},{key:"addTrait",value:function(t){this.traits.push(t),this[t.name]=t}},{key:"update",value:function(t){for(var e=-1,n=this.traits.length;++e<n;)this.traits[e].update(this,t)}},{key:"obstruct",value:function(t,e){for(var n=-1,r=this.traits.length;++n<r;)this.traits[n].obstruct(this,t,e)}},{key:"top",get:function(){return this.pos.y-this.size/2},set:function(t){return this.pos.y=t+this.size/2}},{key:"bottom",get:function(){return this.pos.y+this.size/2},set:function(t){return this.pos.y=t-this.size/2}},{key:"left",get:function(){return this.pos.x-this.size/2},set:function(t){return this.pos.x=t+this.size/2}},{key:"right",get:function(){return this.pos.x+this.size/2},set:function(t){return this.pos.x=t-this.size/2}}]),t}());e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!1===e(t[n],n,t))return}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),u=n(3),a=(r=u)&&r.__esModule?r:{default:r};var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15132390;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.color=n,this.graphics=new i.Graphics,this.children=[]}return o(t,[{key:"clear",value:function(){this.graphics.clear(),this.graphics.beginFill(this.color)}},{key:"render",value:function(t){var e=this;this.clear(),this.forEach(function(n){e.graphics.drawRect(t.rootX+n.left,t.rootY+n.top,n.size,n.size)})}},{key:"update",value:function(t){this.forEach(function(e){e.update(t)})}},{key:"append",value:function(t){t.parent!==this&&(null!==t.parent&&t.parent.remove(t),this.children.push(t),t.parent=this)}},{key:"remove",value:function(t){if(t.parent===this){var e=this.children.indexOf(t);-1!==e&&(this.children.splice(e,1),t.parent=null)}}},{key:"forEach",value:function(t){(0,a.default)(this.children,t)}},{key:"head",get:function(){return this.children[0]}}]),t}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),u=(r=i)&&r.__esModule?r:{default:r},a=n(2);var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"jump"));return t.velocity=200,t.duration=.3,t.gracePeriod=.1,t.ready=0,t.requestTime=0,t.engageTime=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"start",value:function(){this.requestTime=this.gracePeriod}},{key:"cancel",value:function(){this.requestTime=0,this.engageTime=0}},{key:"update",value:function(t,e){this.requestTime>0&&(this.ready>0&&(this.engageTime=this.duration,this.requestTime=0),this.requestTime-=e),this.engageTime>0&&(t.vel.y=-this.velocity,this.engageTime-=e),this.ready--}},{key:"obstruct",value:function(t,e){e.local===a.EDGE.BOTTOM?this.ready=1:e.local===a.EDGE.TOP&&this.cancel()}},{key:"falling",get:function(){return this.ready<0}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),u=(r=i)&&r.__esModule?r:{default:r};var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"move"));return t.dir=0,t.acceleration=500,t.deceleration=300,t.dragFactor=.95,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"update",value:function(t,e){var n=Math.abs(t.vel.x);if(0!==this.dir)t.vel.x+=this.acceleration*e*this.dir;else if(0!==t.vel.x){var r=Math.min(n,this.deceleration*e);t.vel.x+=t.vel.x>0?-r:r}t.vel.x*=this.dragFactor}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),u=(r=i)&&r.__esModule?r:{default:r};var a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"killable"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"obstruct",value:function(t,e,n){"bombs"===n.parent.name&&n.explosive.start(t)}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),u=(r=i)&&r.__esModule?r:{default:r};var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.radius=e,this.layers=[],this.bounds={}}return o(t,[{key:"inTop",value:function(t){return t.x>this.bounds.left&&t.x<this.bounds.right&&t.y<this.bounds.top}},{key:"inRight",value:function(t){return t.y>this.bounds.top&&t.y<this.bounds.bottom&&t.x>this.bounds.right}},{key:"inBottom",value:function(t){return t.x>this.bounds.left&&t.x<this.bounds.right&&t.y>this.bounds.bottom}},{key:"inLeft",value:function(t){return t.y>this.bounds.top&&t.y<this.bounds.bottom&&t.x<this.bounds.left}},{key:"calculate",value:function(){var t=this,e=0,n=0;(0,u.default)(this.layers,function(t){t.forEach(function(t){t.left<e&&(e=t.left),t.right>n&&(n=t.right)})});var r=0,o=0,i=0,a=0;(0,u.default)(this.layers,function(u){u.forEach(function(u){u.pos.x<e+t.radius?(u.top<r&&(r=u.top),u.bottom>i&&(i=u.bottom)):u.pos.x>n-t.radius&&(u.top<o&&(o=u.top),u.bottom>a&&(a=u.bottom))})}),this.bounds={top:Math.max(r,o),bottom:Math.min(i,a),left:e,right:n}}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DIR_SHIFT=e.DIR=void 0;var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(1)),u=s(n(8)),a=n(2),l=s(n(3));function s(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=e.DIR={TOP:Symbol("top"),RIGHT:Symbol("right"),BOTTOM:Symbol("bottom"),LEFT:Symbol("left")},h=e.DIR_SHIFT=(c(r={},f.TOP,2),c(r,f.RIGHT,1),c(r,f.BOTTOM,0),c(r,f.LEFT,3),r),d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"physics"));return n.gravity=1e3,n.dir=f.BOTTOM,n.fields=new u.default(t.size),n.layers=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),o(e,[{key:"update",value:function(t,e){this.checkDirection(t);var n=this.rotateVector(t.vel).x;t.pos.x+=n*e,this.checkX(t,n);var r=this.rotateVector(t.vel).y;t.pos.y+=r*e,this.checkY(t,r),t.vel.y+=this.gravity*e}},{key:"checkX",value:function(t,e){var n=this;(0,l.default)(this.layers,function(r){r.forEach(function(r){t.intersection(r)&&(e>0?t.right>r.left&&t.obstruct(n.rotateEdge(a.EDGE.RIGHT),r):e<0&&t.left<r.right&&t.obstruct(n.rotateEdge(a.EDGE.LEFT),r))})})}},{key:"checkY",value:function(t,e){var n=this;(0,l.default)(this.layers,function(r){r.forEach(function(r){t.intersection(r)&&(e>0?t.bottom>r.top&&t.obstruct(n.rotateEdge(a.EDGE.BOTTOM),r):e<0&&t.top<r.bottom&&t.obstruct(n.rotateEdge(a.EDGE.TOP),r))})})}},{key:"checkDirection",value:function(t){this.fields.inTop(t.pos)?this.dir=f.BOTTOM:this.fields.inBottom(t.pos)?this.dir=f.TOP:this.fields.inLeft(t.pos)?this.dir=f.RIGHT:this.fields.inRight(t.pos)&&(this.dir=f.LEFT)}},{key:"obstruct",value:function(t,e,n){var r=this.dir===f.TOP||this.dir===f.BOTTOM;e.global===a.EDGE.BOTTOM?(t.bottom=n.top,t.vel[r?"y":"x"]=0):e.global===a.EDGE.TOP?(t.top=n.bottom,t.vel[r?"y":"x"]=0):e.global===a.EDGE.LEFT?(t.left=n.right,t.vel[r?"x":"y"]=0):e.global===a.EDGE.RIGHT&&(t.right=n.left,t.vel[r?"x":"y"]=0)}},{key:"rotateVector",value:function(t){var e=t.x,n=t.y;switch(this.dir){case f.TOP:return{x:-e,y:-n};case f.BOTTOM:default:return{x:e,y:n};case f.LEFT:return{x:-n,y:e};case f.RIGHT:return{x:n,y:-e}}}},{key:"rotateEdge",value:function(t){var e=a.EDGE_TABLE.indexOf(t);if(-1!==e){var n=(e+h[this.dir])%a.EDGE_TABLE.length;return{global:a.EDGE_TABLE[e],local:a.EDGE_TABLE[n]}}return{global:a.EDGE.BOTTOM,local:a.EDGE.BOTTOM}}},{key:"addLayers",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.layers=this.layers.concat(e),this.fields.layers=this.layers,this.fields.calculate()}}]),e}();e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.states=new Map,this.events=new Map,this.listenTo(e)}return r(t,[{key:"on",value:function(t,e){this.events.set(t,e)}},{key:"handleEvent",value:function(t){t.preventDefault();var e=t.code;if(this.events.has(e)){var n="keydown"===t.type?1:0;this.states.get(e)!==n&&(this.states.set(e,n),this.events.get(e)(n))}}},{key:"listenTo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;["keydown","keyup"].forEach(function(n){e.addEventListener(n,function(e){t.handleEvent(e)})})}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(10)),o=c(n(4)),i=c(n(2)),u=c(n(9)),a=c(n(7)),l=c(n(6)),s=c(n(5));function c(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){var e=new o.default("player",130689),n=new i.default(0,-250,t.size);e.append(n),n.addTrait(new u.default(t)),n.addTrait(new a.default),n.addTrait(new l.default),n.addTrait(new s.default);var c=new r.default;return c.on("ArrowRight",function(t){n.move.dir+=t?1:-1}),c.on("ArrowLeft",function(t){n.move.dir+=t?-1:1}),c.on("Space",function(t){t?n.jump.start():n.jump.cancel()}),e}},function(t){t.exports={name:"1-1",ground:[[-1,-2],[0,-2],[1,-2],[-1,-1],[0,-1],[1,-1],[-2,0],[-1,0],[0,0],[1,0],[2,0],[-2,1],[-1,1],[0,1],[1,1],[3,1],[4,1],[5,1]],bombs:[[4,0]],jumps:[],prize:[[-1,2]]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),u=(r=i)&&r.__esModule?r:{default:r};var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"explosive"));return n.level=t,n.touched=!1,n.timeout=.25,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"start",value:function(){this.touched=!0}},{key:"update",value:function(t,e){this.touched&&(this.timeout<0&&(t.parent.remove(t),console.log("boom!")),this.timeout-=e)}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),u=(r=i)&&r.__esModule?r:{default:r};var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"shine"));return n.size=t,n.speed=5,n.time=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"update",value:function(t,e){var n=(Math.sin(this.time)+1)/2;t.size=n<.25?.8*this.size:this.size,this.time+=e*this.speed}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e||0,this.y=n||0}return r(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"subtract",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"divide",value:function(t){return this.x=t.x?this.x*(1/t.x):0,this.y=t.y?this.y*(1/t.y):0,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divideScalar",value:function(t){if(0===t)this.x=0,this.y=0;else{var e=1/t;this.x*=e,this.y*=e}return this}},{key:"invert",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"limit",value:function(t){return this.length>t&&(this.length=t),this}},{key:"rotate",value:function(t){var e=this.x;return this.x=this.x*Math.cos(t)-this.y*Math.sin(t),this.y=e*Math.sin(t)+this.y*Math.cos(t),this}},{key:"normalize",value:function(){return this.divideScalar(this.length)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"distanceSq",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSq(t))}},{key:"lengthSq",get:function(){return this.dot(this)}},{key:"length",get:function(){return Math.sqrt(this.lengthSq)},set:function(t){var e=this.length;0!==e&&t!==e&&this.multiplyScalar(t/e)}},{key:"rad",get:function(){return Math.atan2(this.x,this.y)},set:function(t){this.set(Math.cos(t)*this.length,Math.sin(t)*this.length)}},{key:"deg",get:function(){return 180*this.rad/Math.PI},set:function(t){this.rad=t*Math.PI/180}}]),t}();e.default=o},function(t,e,n){"use strict";n.r(e),n.d(e,"GlowFilter",function(){return u});var r=n(0),o="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",i="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float distance;\nuniform float outerStrength;\nuniform float innerStrength;\nuniform vec4 glowColor;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float totalAlpha = 0.0;\n    float maxTotalAlpha = 0.0;\n    float cosAngle;\n    float sinAngle;\n    vec2 displaced;\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\n       cosAngle = cos(angle);\n       sinAngle = sin(angle);\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\n           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;\n           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;\n           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n           totalAlpha += (distance - curDistance) * curColor.a;\n           maxTotalAlpha += (distance - curDistance);\n       }\n    }\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\n\n    ownColor.a = max(ownColor.a, 0.0001);\n    ownColor.rgb = ownColor.rgb / ownColor.a;\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\n}\n",u=function(t){function e(e,n,r,u,a){void 0===e&&(e=10),void 0===n&&(n=4),void 0===r&&(r=0),void 0===u&&(u=16777215),void 0===a&&(a=.1),t.call(this,o,i.replace(/%QUALITY_DIST%/gi,""+(1/a/e).toFixed(7)).replace(/%DIST%/gi,""+e.toFixed(7))),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.distance=e,this.color=u,this.outerStrength=n,this.innerStrength=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={color:{configurable:!0},distance:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0}};return n.color.get=function(){return r.utils.rgb2hex(this.uniforms.glowColor)},n.color.set=function(t){r.utils.hex2rgb(t,this.uniforms.glowColor)},n.distance.get=function(){return this.uniforms.distance},n.distance.set=function(t){this.uniforms.distance=t},n.outerStrength.get=function(){return this.uniforms.outerStrength},n.outerStrength.set=function(t){this.uniforms.outerStrength=t},n.innerStrength.get=function(){return this.uniforms.innerStrength},n.innerStrength.set=function(t){this.uniforms.innerStrength=t},Object.defineProperties(e.prototype,n),e}(r.Filter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(16),i=s(n(4)),u=s(n(2)),a=s(n(14)),l=s(n(13));function s(t){return t&&t.__esModule?t:{default:t}}var c=14357112,f=738980,h=16244012,d=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=n.name,this.global=e,this.ground=new i.default("ground",c),this.bombs=new i.default("bombs",f),this.prize=new i.default("prize",h),this.prize.graphics.filters=[new o.GlowFilter(10,1,0,h)],this.createFromData(n,"ground"),this.createFromData(n,"bombs"),this.createFromData(n,"prize"),e.addLayer(this.ground),e.addLayer(this.bombs),e.addLayer(this.prize),this.prize.head.addTrait(new a.default(e.size)),this.bombs.forEach(function(t){return t.addTrait(new l.default(r))}),console.log(this)}return r(t,[{key:"createFromData",value:function(t,e){var n=this;t[e].forEach(function(t){n[e].append(new u.default(n.global.gridToLocal(t[0]),n.global.gridToLocal(t[1]),n.global.size))})}},{key:"render",value:function(t){this.ground.render(t),this.bombs.render(t),this.prize.render(t)}},{key:"update",value:function(t){this.bombs.update(t),this.prize.update(t)}},{key:"solids",get:function(){return[this.ground,this.bombs]}}]),t}();e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.app=e,this.size=r,this.time=1/60,this.update(),window.addEventListener("resize",function(){e.renderer.resize(window.innerWidth,window.innerHeight),n.update()})}return r(t,[{key:"update",value:function(){this.rootX=this.app.screen.width/2,this.rootY=this.app.screen.height/2,this.app.stage.filterArea=this.app.screen}},{key:"addLayer",value:function(t){this.app.stage.addChild(t.graphics)}},{key:"gridToLocal",value:function(t){return t*this.size}},{key:"localToGrid",value:function(t){return Math.round(t/this.size)||0}},{key:"globalToLocalX",value:function(t){return t-this.rootX}},{key:"globalToLocalY",value:function(t){return t-this.rootY}},{key:"globalToGridX",value:function(t){return this.localToGrid(this.globalToLocalX(t))}},{key:"globalToGridY",value:function(t){return this.localToGrid(this.globalToLocalY(t))}}]),t}();e.default=o},function(t,e,n){"use strict";n.r(e),n.d(e,"RGBSplitFilter",function(){return u});var r=n(0),o="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",i="precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",u=function(t){function e(e,n,r){void 0===e&&(e=[-10,0]),void 0===n&&(n=[0,10]),void 0===r&&(r=[0,0]),t.call(this,o,i),this.red=e,this.green=n,this.blue=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return n.red.get=function(){return this.uniforms.red},n.red.set=function(t){this.uniforms.red=t},n.green.get=function(){return this.uniforms.green},n.green.set=function(t){this.uniforms.green=t},n.blue.get=function(){return this.uniforms.blue},n.blue.set=function(t){this.uniforms.blue=t},Object.defineProperties(e.prototype,n),e}(r.Filter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(19),i=new r.Application({width:window.innerWidth,height:window.innerHeight,backgroundColor:1579842});i.stage.filters=[new o.RGBSplitFilter([1,0],[-1,0],[0,2]),new r.filters.BlurFilter(.25)],document.body.appendChild(i.view),e.default=i},function(t,e,n){"use strict";var r,o=s(n(20)),i=s(n(18)),u=s(n(17)),a=s(n(12)),l=s(n(11));function s(t){return t&&t.__esModule?t:{default:t}}var c=new i.default(o.default,24),f=new u.default(c,a.default),h=(0,l.default)(c);(r=h.head.physics).addLayers.apply(r,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(f.solids)),c.addLayer(h),o.default.ticker.add(function(t){var e=c.time*t;f.update(e),h.update(e),f.render(c),h.render(c)})}]);