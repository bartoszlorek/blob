!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t){e.exports=PIXI},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t}return r(e,[{key:"update",value:function(){}},{key:"obstruct",value:function(){}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EDGE_TABLE=t.EDGE=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(20),a=(r=o)&&r.__esModule?r:{default:r};var u=t.EDGE={TOP:Symbol("top"),RIGHT:Symbol("right"),BOTTOM:Symbol("bottom"),LEFT:Symbol("left")},l=(t.EDGE_TABLE=[u.TOP,u.RIGHT,u.BOTTOM,u.LEFT],function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pos=new a.default(t,n),this.vel=new a.default(0,0),this.size=r,this.visible=!0,this.parent=null,this.traits=[]}return i(e,[{key:"intersection",value:function(e){return this.top<e.bottom&&this.bottom>e.top&&this.right>e.left&&this.left<e.right}},{key:"addTrait",value:function(e){this.traits.push(e),this[e.name]=e}},{key:"update",value:function(e){for(var t=-1,n=this.traits.length;++t<n;)this.traits[t].update(this,e)}},{key:"obstruct",value:function(e,t){for(var n=-1,r=this.traits.length;++n<r;)this.traits[n].obstruct(this,e,t)}},{key:"top",get:function(){return this.pos.y-this.size/2},set:function(e){return this.pos.y=e+this.size/2}},{key:"bottom",get:function(){return this.pos.y+this.size/2},set:function(e){return this.pos.y=e-this.size/2}},{key:"left",get:function(){return this.pos.x-this.size/2},set:function(e){return this.pos.x=e+this.size/2}},{key:"right",get:function(){return this.pos.x+this.size/2},set:function(e){return this.pos.x=e-this.size/2}}]),e}());t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=n(4),u=(r=a)&&r.__esModule?r:{default:r};var l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15132390;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.color=n,this.graphics=new o.Graphics,this.children=[]}return i(e,[{key:"clear",value:function(){this.graphics.clear(),this.graphics.beginFill(this.color)}},{key:"render",value:function(e){var t=this;this.clear(),this.forEach(function(n){n.visible&&t.graphics.drawRect(e.rootX+n.left,e.rootY+n.top,n.size,n.size)})}},{key:"update",value:function(e){this.forEach(function(t){t.update(e)})}},{key:"append",value:function(e){e.parent!==this&&(null!==e.parent&&e.parent.remove(e),this.children.push(e),e.parent=this)}},{key:"remove",value:function(e){if(e.parent===this){var t=this.children.indexOf(e);-1!==t&&(this.children.splice(t,1),e.parent=null)}}},{key:"forEach",value:function(e){(0,u.default)(this.children,e)}},{key:"head",get:function(){return this.children[0]}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!1===t(e[n],n,e))return}},function(e,t,n){"use strict";n.r(t),n.d(t,"GlowFilter",function(){return a});var r=n(0),i="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",o="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float distance;\nuniform float outerStrength;\nuniform float innerStrength;\nuniform vec4 glowColor;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float totalAlpha = 0.0;\n    float maxTotalAlpha = 0.0;\n    float cosAngle;\n    float sinAngle;\n    vec2 displaced;\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\n       cosAngle = cos(angle);\n       sinAngle = sin(angle);\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\n           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;\n           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;\n           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n           totalAlpha += (distance - curDistance) * curColor.a;\n           maxTotalAlpha += (distance - curDistance);\n       }\n    }\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\n\n    ownColor.a = max(ownColor.a, 0.0001);\n    ownColor.rgb = ownColor.rgb / ownColor.a;\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\n}\n",a=function(e){function t(t,n,r,a,u){void 0===t&&(t=10),void 0===n&&(n=4),void 0===r&&(r=0),void 0===a&&(a=16777215),void 0===u&&(u=.1),e.call(this,i,o.replace(/%QUALITY_DIST%/gi,""+(1/u/t).toFixed(7)).replace(/%DIST%/gi,""+t.toFixed(7))),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.distance=t,this.color=a,this.outerStrength=n,this.innerStrength=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={color:{configurable:!0},distance:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0}};return n.color.get=function(){return r.utils.rgb2hex(this.uniforms.glowColor)},n.color.set=function(e){r.utils.hex2rgb(e,this.uniforms.glowColor)},n.distance.get=function(){return this.uniforms.distance},n.distance.set=function(e){this.uniforms.distance=e},n.outerStrength.get=function(){return this.uniforms.outerStrength},n.outerStrength.set=function(e){this.uniforms.outerStrength=e},n.innerStrength.get=function(){return this.uniforms.innerStrength},n.innerStrength.set=function(e){this.uniforms.innerStrength=e},Object.defineProperties(t.prototype,n),t}(r.Filter)},function(e){e.exports={name:"1-1",ground:[[-1,-2],[0,-2],[1,-2],[-1,-1],[0,-1],[1,-1],[-2,0],[-1,0],[0,0],[1,0],[2,0],[-2,1],[-1,1],[0,1],[1,1],[3,1],[4,1],[5,1]],bombs:[[4,0]],jumps:[],prize:[[-1,2]]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.frames=n,this.loop=r,this.stop()}return r(e,[{key:"load",value:function(){this.frameIndex=-1,this.frameTime=0,this.time=0}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1}},{key:"stop",value:function(){this.load(),this.pause()}},{key:"nextFrame",value:function(){++this.frameIndex<this.frames.length?this.frameTime=this.frames[this.frameIndex][0]:this.loop?this.load():this.stop()}},{key:"update",value:function(e){this.frameIndex<0&&this.nextFrame(),this.time>=this.frameTime&&(this.frames[this.frameIndex][1](this.frameIndex,e),this.nextFrame()),this.time+=e}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(7)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"animation"));return e.keyframes=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.keyframes.push(new i.default(e,t,n)),this}},{key:"play",value:function(e){var t=this.keyframes.filter(function(t){return t.name===e});return void 0!==t[0]&&t[0].play(),this}},{key:"update",value:function(e,t){for(var n=-1,r=this.keyframes.length;++n<r;)this.keyframes[n].playing&&this.keyframes[n].update(t)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r};var u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.15;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"blink"));return n.freq=e,n.time=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"update",value:function(e,t){this.time>this.freq&&(e.visible=!e.visible,this.time=0),this.time+=t}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(4)),o=s(n(2)),a=s(n(1)),u=s(n(9)),l=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"explosive"));return n.range=e,n.timer=.25,n.ignition=-1,n.exploded=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"start",value:function(){this.ignition++}},{key:"update",value:function(e,t){var n=this;if(this.ignition<0||this.exploded)return!1;if(0===this.ignition)e.addTrait(new u.default(.1)),this.ignition++;else if(this.timer<0){this.exploded=!0;var r=e.parent.level,i=new o.default(e.pos.x,e.pos.y,e.size);r.effect.append(i),i.addTrait(new l.default),i.animation.add("blast",[[.01,function(){return i.size+=n.range}],[.1,function(){return i.size+=n.range}],[.18,function(){return i.size-=n.range/2}],[.2,function(){return n.destroy(i)}]]).play("blast"),this.affect(e,[r.ground,r.player]).forEach(this.destroy),this.destroy(e),r.player.head?r.player.head.physics.fields.calculate():setTimeout(function(){return r.gameOver()},1e3)}this.timer-=t}},{key:"affect",value:function(e,t){var n=this,r=[];return(0,i.default)(t,function(t){t.forEach(function(t){n.intersection(e,t)&&r.push(t)})}),r}},{key:"destroy",value:function(e){e.parent.remove(e)}},{key:"intersection",value:function(e,t){return e.top-this.range<t.bottom&&e.bottom+this.range>t.top&&e.right+this.range>t.left&&e.left-this.range<t.right}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),i=a(n(2)),o=a(n(10));function a(e){return e&&e.__esModule?e:{default:e}}var u=738980;t.default=function(e,t,n){var a=new r.default("bombs",u);return a.level=t||null,n.forEach(function(t){var n=new i.default(e.gridToLocal(t[0]),e.gridToLocal(t[1]),e.size);n.addTrait(new o.default(e.size)),a.append(n)}),a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r};var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"shine"));return n.size=e,n.speed=5,n.timer=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"update",value:function(e,t){var n=(Math.sin(this.timer)+1)/2;e.size=n<.25?.8*this.size:this.size,this.timer+=t*this.speed}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=u(n(3)),o=u(n(2)),a=u(n(12));function u(e){return e&&e.__esModule?e:{default:e}}var l=15916080;t.default=function(e,t,n){var u=new i.default("prize",l);return u.level=t||null,u.graphics.filters=[new r.GlowFilter(10,1,0,l)],n.forEach(function(t){var n=new o.default(e.gridToLocal(t[0]),e.gridToLocal(t[1]),e.size);n.addTrait(new a.default(e.size)),u.append(n)}),u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(3)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var a=14227063;t.default=function(e,t,n){var o=new r.default("ground",a);return o.level=t||null,n.forEach(function(t){var n=new i.default(e.gridToLocal(t[0]),e.gridToLocal(t[1]),e.size);o.append(n)}),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r},u=n(2);var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"jump"));return e.velocity=200,e.duration=.3,e.gracePeriod=.1,e.ready=0,e.requestTime=0,e.engageTime=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"start",value:function(){this.requestTime=this.gracePeriod}},{key:"cancel",value:function(){this.requestTime=0,this.engageTime=0}},{key:"update",value:function(e,t){this.requestTime>0&&(this.ready>0&&(this.engageTime=this.duration,this.requestTime=0),this.requestTime-=t),this.engageTime>0&&(e.vel.y=-this.velocity,this.engageTime-=t),this.ready--}},{key:"obstruct",value:function(e,t){t.local===u.EDGE.BOTTOM?this.ready=1:t.local===u.EDGE.TOP&&this.cancel()}},{key:"falling",get:function(){return this.ready<0}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r};var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"move"));return e.dir=0,e.acceleration=500,e.deceleration=300,e.dragFactor=.95,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"update",value:function(e,t){var n=Math.abs(e.vel.x);if(0!==this.dir)e.vel.x+=this.acceleration*t*this.dir;else if(0!==e.vel.x){var r=Math.min(n,this.deceleration*t);e.vel.x+=e.vel.x>0?-r:r}e.vel.x*=this.dragFactor}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"killable"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"obstruct",value:function(e,t,n){"bombs"===n.parent.name&&n.explosive.start(e)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),a=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.radius=t,this.layers=[],this.bounds={}}return i(e,[{key:"inTop",value:function(e){return e.x>this.bounds.left&&e.x<this.bounds.right&&e.y<this.bounds.top}},{key:"inRight",value:function(e){return e.y>this.bounds.top&&e.y<this.bounds.bottom&&e.x>this.bounds.right}},{key:"inBottom",value:function(e){return e.x>this.bounds.left&&e.x<this.bounds.right&&e.y>this.bounds.bottom}},{key:"inLeft",value:function(e){return e.y>this.bounds.top&&e.y<this.bounds.bottom&&e.x<this.bounds.left}},{key:"calculate",value:function(){var e=this,t=0,n=0;(0,a.default)(this.layers,function(e){e.forEach(function(e){e.left<t&&(t=e.left),e.right>n&&(n=e.right)})});var r=0,i=0,o=0,u=0;(0,a.default)(this.layers,function(a){a.forEach(function(a){a.pos.x<t+e.radius?(a.top<r&&(r=a.top),a.bottom>o&&(o=a.bottom)):a.pos.x>n-e.radius&&(a.top<i&&(i=a.top),a.bottom>u&&(u=a.bottom))})}),this.bounds={top:Math.max(r,i),bottom:Math.min(o,u),left:t,right:n}}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DIR_SHIFT=t.DIR=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(1)),a=s(n(18)),u=n(2),l=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=t.DIR={TOP:Symbol("top"),RIGHT:Symbol("right"),BOTTOM:Symbol("bottom"),LEFT:Symbol("left")},h=t.DIR_SHIFT=(c(r={},f.TOP,2),c(r,f.RIGHT,1),c(r,f.BOTTOM,0),c(r,f.LEFT,3),r),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"physics"));return n.gravity=1e3,n.dir=f.BOTTOM,n.fields=new a.default(e.size),n.layers=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"update",value:function(e,t){this.checkDirection(e);var n=this.rotateVector(e.vel).x;e.pos.x+=n*t,this.checkX(e,n);var r=this.rotateVector(e.vel).y;e.pos.y+=r*t,this.checkY(e,r),e.vel.y+=this.gravity*t}},{key:"checkX",value:function(e,t){var n=this;(0,l.default)(this.layers,function(r){r.forEach(function(r){e.intersection(r)&&(t>0?e.right>r.left&&e.obstruct(n.rotateEdge(u.EDGE.RIGHT),r):t<0&&e.left<r.right&&e.obstruct(n.rotateEdge(u.EDGE.LEFT),r))})})}},{key:"checkY",value:function(e,t){var n=this;(0,l.default)(this.layers,function(r){r.forEach(function(r){e.intersection(r)&&(t>0?e.bottom>r.top&&e.obstruct(n.rotateEdge(u.EDGE.BOTTOM),r):t<0&&(n.shouldAlignCorner(e,r)&&(e.right=r.left),e.top<r.bottom&&e.obstruct(n.rotateEdge(u.EDGE.TOP),r)))})})}},{key:"checkDirection",value:function(e){var t=this.dir;this.fields.inTop(e.pos)?this.dir=f.BOTTOM:this.fields.inBottom(e.pos)?this.dir=f.TOP:this.fields.inLeft(e.pos)?this.dir=f.RIGHT:this.fields.inRight(e.pos)&&(this.dir=f.LEFT),this.dir!==t&&(e.vel.x*=1.5,e.vel.y*=.5)}},{key:"obstruct",value:function(e,t,n){t.global===u.EDGE.BOTTOM?(e.bottom=n.top,e.vel[this.isVertical?"y":"x"]=0):t.global===u.EDGE.TOP?(e.top=n.bottom,e.vel[this.isVertical?"y":"x"]=0):t.global===u.EDGE.LEFT?(e.left=n.right,e.vel[this.isVertical?"x":"y"]=0):t.global===u.EDGE.RIGHT&&(e.right=n.left,e.vel[this.isVertical?"x":"y"]=0)}},{key:"rotateVector",value:function(e){var t=e.x,n=e.y;switch(this.dir){case f.TOP:return{x:-t,y:-n};case f.BOTTOM:default:return{x:t,y:n};case f.LEFT:return{x:-n,y:t};case f.RIGHT:return{x:n,y:-t}}}},{key:"rotateEdge",value:function(e){var t=u.EDGE_TABLE.indexOf(e);if(-1!==t){var n=(t+h[this.dir])%u.EDGE_TABLE.length;return{global:u.EDGE_TABLE[t],local:u.EDGE_TABLE[n]}}return{global:u.EDGE.BOTTOM,local:u.EDGE.BOTTOM}}},{key:"shouldAlignCorner",value:function(e,t){return e.left-t.right<2&&e.right-t.left<2}},{key:"addLayers",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.layers=this.layers.concat(t),this.fields.layers=this.layers,this.fields.calculate()}},{key:"isVertical",get:function(){return this.dir===f.TOP||this.dir===f.BOTTOM}}]),t}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t||0,this.y=n||0}return r(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"subtract",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"divide",value:function(e){return this.x=e.x?this.x*(1/e.x):0,this.y=e.y?this.y*(1/e.y):0,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divideScalar",value:function(e){if(0===e)this.x=0,this.y=0;else{var t=1/e;this.x*=t,this.y*=t}return this}},{key:"invert",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"limit",value:function(e){return this.length>e&&(this.length=e),this}},{key:"rotate",value:function(e){var t=this.x;return this.x=this.x*Math.cos(e)-this.y*Math.sin(e),this.y=t*Math.sin(e)+this.y*Math.cos(e),this}},{key:"normalize",value:function(){return this.divideScalar(this.length)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"distanceSq",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSq(e))}},{key:"lengthSq",get:function(){return this.dot(this)}},{key:"length",get:function(){return Math.sqrt(this.lengthSq)},set:function(e){var t=this.length;0!==t&&e!==t&&this.multiplyScalar(e/t)}},{key:"rad",get:function(){return Math.atan2(this.x,this.y)},set:function(e){this.set(Math.cos(e)*this.length,Math.sin(e)*this.length)}},{key:"deg",get:function(){return 180*this.rad/Math.PI},set:function(e){this.rad=e*Math.PI/180}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.states=new Map,this.events=new Map,this.listenTo(t)}return r(e,[{key:"on",value:function(e,t){this.events.set(e,t)}},{key:"handleEvent",value:function(e){e.preventDefault();var t=e.code;if(this.events.has(t)){var n="keydown"===e.type?1:0;this.states.get(t)!==n&&(this.states.set(t,n),this.events.get(t)(n))}}},{key:"listenTo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;["keydown","keyup"].forEach(function(n){t.addEventListener(n,function(t){e.handleEvent(t)})})}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(21)),i=c(n(3)),o=c(n(2)),a=c(n(19)),u=c(n(17)),l=c(n(16)),s=c(n(15));function c(e){return e&&e.__esModule?e:{default:e}}var f=64899;t.default=function(e,t,n){var c=new i.default("player",f),h=new o.default(0,-250,e.size);c.level=t||null,c.append(h),h.addTrait(new a.default(e)),h.addTrait(new u.default),h.addTrait(new l.default),h.addTrait(new s.default);var d=new r.default;return d.on("ArrowRight",function(e){h.move.dir+=e?1:-1}),d.on("ArrowLeft",function(e){h.move.dir+=e?-1:1}),d.on("Space",function(e){e?h.jump.start():h.jump.cancel()}),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),o=c(n(3)),a=c(n(22)),u=c(n(14)),l=c(n(13)),s=c(n(11));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=n.name,this.data=n,this.global=t,this.initialize()}return r(e,[{key:"initialize",value:function(){this.effect=new o.default("effect",16777215),this.player=(0,a.default)(this.global,this,this.data.player),this.ground=(0,u.default)(this.global,this,this.data.ground),this.prize=(0,l.default)(this.global,this,this.data.prize),this.bombs=(0,s.default)(this.global,this,this.data.bombs),this.player.head.physics.addLayers(this.ground,this.bombs),this.effect.graphics.filters=[new i.GlowFilter(15,1,0,16777215)],this.global.addLayer(this.ground),this.global.addLayer(this.bombs),this.global.addLayer(this.prize),this.global.addLayer(this.effect),this.global.addLayer(this.player),console.log(this)}},{key:"gameOver",value:function(){this.global.clearLayers(),this.initialize()}},{key:"render",value:function(e){this.player.render(e),this.ground.render(e),this.prize.render(e),this.bombs.render(e),this.effect.render(e)}},{key:"update",value:function(e){this.player.update(e),this.prize.update(e),this.bombs.update(e),this.effect.update(e)}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.x-=t,e.y-=t,e.width+=2*t,e.height+=2*t,e}},function(e,t,n){"use strict";n.r(t),n.d(t,"RGBSplitFilter",function(){return a});var r=n(0),i="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",o="precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",a=function(e){function t(t,n,r){void 0===t&&(t=[-10,0]),void 0===n&&(n=[0,10]),void 0===r&&(r=[0,0]),e.call(this,i,o),this.red=t,this.green=n,this.blue=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return n.red.get=function(){return this.uniforms.red},n.red.set=function(e){this.uniforms.red=e},n.green.get=function(){return this.uniforms.green},n.green.set=function(e){this.uniforms.green=e},n.blue.get=function(){return this.uniforms.blue},n.blue.set=function(e){this.uniforms.blue=e},Object.defineProperties(t.prototype,n),t}(r.Filter)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=n(25),u=n(24),l=(r=u)&&r.__esModule?r:{default:r};var s=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.size=r,this.time=1/60,this.background=new o.Container,this.foreground=new o.Container,this.foreground.filters=[new a.RGBSplitFilter([1,0],[-1,0],[0,2]),new o.filters.BlurFilter(.25)],this.background.addChild(new o.extras.TilingSprite(o.loader.resources.space.texture)),t.stage.addChild(this.background),t.stage.addChild(this.foreground),window.addEventListener("resize",function(){t.renderer.resize(window.innerWidth,window.innerHeight),n.resize()}),this.resize(),this.update()}return i(e,[{key:"resize",value:function(){this.rootX=this.app.screen.width/2,this.rootY=this.app.screen.height/2;var e=this.background.children[0];e.width=this.app.screen.width,e.height=this.app.screen.height,e.tileScale.y=this.app.screen.height/e.texture.height}},{key:"update",value:function(e){var t=this.foreground.getBounds();this.foreground.filterArea=(0,l.default)(t,10)}},{key:"addLayer",value:function(e){this.foreground.addChild(e.graphics)}},{key:"clearLayers",value:function(){for(;this.foreground.children[0];)this.foreground.removeChild(this.foreground.children[0])}},{key:"gridToLocal",value:function(e){return e*this.size}},{key:"localToGrid",value:function(e){return Math.round(e/this.size)||0}},{key:"globalToLocalX",value:function(e){return e-this.rootX}},{key:"globalToLocalY",value:function(e){return e-this.rootY}},{key:"globalToGridX",value:function(e){return this.localToGrid(this.globalToLocalX(e))}},{key:"globalToGridY",value:function(e){return this.localToGrid(this.globalToLocalY(e))}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new(n(0).Application)({width:window.innerWidth,height:window.innerHeight,backgroundColor:1186884});document.body.appendChild(r.view),t.default=r},function(e,t,n){"use strict";var r=n(0),i=l(n(27)),o=l(n(26)),a=l(n(23)),u=l(n(6));function l(e){return e&&e.__esModule?e:{default:e}}r.loader.add([{name:"space",url:"images/space.png"}]).on("complete",function(){var e=new o.default(i.default,24),t=new a.default(e,u.default);i.default.ticker.add(function(n){var r=e.time*n;e.update(r),t.update(r),t.render(e)})}).load()}]);