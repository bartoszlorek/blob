!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=40)}([function(t,e){t.exports=PIXI},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e}return r(t,[{key:"update",value:function(){}},{key:"obstruct",value:function(){}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EDGE_TABLE=e.EDGE=void 0;var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(25),u=(r=o)&&r.__esModule?r:{default:r};var s=e.EDGE={TOP:Symbol("top"),RIGHT:Symbol("right"),BOTTOM:Symbol("bottom"),LEFT:Symbol("left")},c=(e.EDGE_TABLE=[s.TOP,s.RIGHT,s.BOTTOM,s.LEFT],function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pos=new u.default(e,n),this.vel=new u.default(0,0),this.size=r,this.visible=!0,this.parent=null,this.traits=[]}return i(t,[{key:"intersection",value:function(t){return this.top<t.bottom&&this.bottom>t.top&&this.right>t.left&&this.left<t.right}},{key:"addTrait",value:function(t){this.traits.push(t),this[t.name]=t}},{key:"update",value:function(t){for(var e=-1,n=this.traits.length;++e<n;)this.traits[e].update(this,t)}},{key:"obstruct",value:function(t,e){for(var n=-1,r=this.traits.length;++n<r;)this.traits[n].obstruct(this,t,e)}},{key:"top",get:function(){return this.pos.y-this.size/2},set:function(t){return this.pos.y=t+this.size/2}},{key:"bottom",get:function(){return this.pos.y+this.size/2},set:function(t){return this.pos.y=t-this.size/2}},{key:"left",get:function(){return this.pos.x-this.size/2},set:function(t){return this.pos.x=t+this.size/2}},{key:"right",get:function(){return this.pos.x+this.size/2},set:function(t){return this.pos.x=t-this.size/2}}]),t}());e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),u=n(4),s=(r=u)&&r.__esModule?r:{default:r};var c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15132390;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.color=n,this.solid=!1,this.graphics=new o.Graphics,this.children=[],this.level=null}return i(t,[{key:"update",value:function(t){this.forEach(function(e){e.update(t)})}},{key:"render",value:function(t){var e=this;this.clear(),this.forEach(function(n){n.visible&&e.graphics.drawRect(t.rootX+n.left,t.rootY+n.top,n.size,n.size)})}},{key:"clear",value:function(){this.graphics.clear(),this.graphics.beginFill(this.color)}},{key:"append",value:function(t){t.parent!==this&&(null!==t.parent&&t.parent.remove(t),this.children.push(t),t.parent=this)}},{key:"remove",value:function(t){if(t.parent===this){var e=this.children.indexOf(t);-1!==e&&(this.children.splice(e,1),t.parent=null)}}},{key:"forEach",value:function(t){(0,s.default)(this.children,t)}},{key:"head",get:function(){return this.children[0]}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!1===e(t[n],n,t))return}},function(t,e,n){"use strict";(function(t,r){var i,o=n(8);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r;var u=Object(o.a)(i);e.a=u}).call(this,n(36),n(35)(t))},function(t,e,n){"use strict";n.r(e),n.d(e,"GlowFilter",function(){return u});var r=n(0),i="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",o="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float distance;\nuniform float outerStrength;\nuniform float innerStrength;\nuniform vec4 glowColor;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float totalAlpha = 0.0;\n    float maxTotalAlpha = 0.0;\n    float cosAngle;\n    float sinAngle;\n    vec2 displaced;\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\n       cosAngle = cos(angle);\n       sinAngle = sin(angle);\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\n           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;\n           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;\n           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n           totalAlpha += (distance - curDistance) * curColor.a;\n           maxTotalAlpha += (distance - curDistance);\n       }\n    }\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\n\n    ownColor.a = max(ownColor.a, 0.0001);\n    ownColor.rgb = ownColor.rgb / ownColor.a;\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\n}\n",u=function(t){function e(e,n,r,u,s){void 0===e&&(e=10),void 0===n&&(n=4),void 0===r&&(r=0),void 0===u&&(u=16777215),void 0===s&&(s=.1),t.call(this,i,o.replace(/%QUALITY_DIST%/gi,""+(1/s/e).toFixed(7)).replace(/%DIST%/gi,""+e.toFixed(7))),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.distance=e,this.color=u,this.outerStrength=n,this.innerStrength=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={color:{configurable:!0},distance:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0}};return n.color.get=function(){return r.utils.rgb2hex(this.uniforms.glowColor)},n.color.set=function(t){r.utils.hex2rgb(t,this.uniforms.glowColor)},n.distance.get=function(){return this.uniforms.distance},n.distance.set=function(t){this.uniforms.distance=t},n.outerStrength.get=function(){return this.uniforms.outerStrength},n.outerStrength.set=function(t){this.uniforms.outerStrength=t},n.innerStrength.get=function(){return this.uniforms.innerStrength},n.innerStrength.set=function(t){this.uniforms.innerStrength=t},Object.defineProperties(e.prototype,n),e}(r.Filter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.GAIN_SCORE="GAIN_SCORE",i=e.LOSE_SCORE="LOSE_SCORE",o=e.RESET_SCORE="RESET_SCORE",u=(e.gainScore=function(t){return{type:r,value:t}},e.loseScore=function(t){return{type:i,value:t}},e.resetScore=function(){return{type:o,value:0}},e.GAIN_LIFE="GAIN_LIFE"),s=e.LOSE_LIFE="LOSE_LIFE",c=e.RESET_LIVES="RESET_LIVES";e.gainLife=function(){return{type:u}},e.loseLife=function(){return{type:s}},e.resetLives=function(){return{type:c}}},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}Object.assign;function o(t){return"function"==typeof t}var u=!1,s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;u=t},get useDeprecatedSynchronousErrorHandling(){return u}};function c(t){setTimeout(function(){throw t})}var a={closed:!0,next:function(t){},error:function(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;c(t)},complete:function(){}},l=Array.isArray||function(t){return t&&"number"==typeof t.length};function f(t){return null!=t&&"object"==typeof t}var h,d={e:{}};function p(){try{return h.apply(this,arguments)}catch(t){return d.e=t,d}}function v(t){return h=t,p}var y=function(t){function e(n){var r=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,e.prototype),r}return i(e,t),e}(Error),b=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,u=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,c=r?r.length:0;n;)n.remove(this),n=++s<c&&r[s]||null;if(o(i))v(i).call(this)===d&&(e=!0,t=t||(d.e instanceof y?g(d.e.errors):[d.e]));if(l(u))for(s=-1,c=u.length;++s<c;){var a=u[s];if(f(a))if(v(a.unsubscribe).call(a)===d){e=!0,t=t||[];var h=d.e;h instanceof y?t=t.concat(g(h.errors)):t.push(h)}}if(e)throw new y(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function g(t){return t.reduce(function(t,e){return t.concat(e instanceof y?e.errors:e)},[])}var m="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",w=function(t){function e(e,n,r){var i,o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=a;break;case 1:if(!e){o.destination=a;break}if("object"==typeof e){if((i=e)instanceof w||"syncErrorThrowable"in i&&i[m]){var u=e[m]();o.syncErrorThrowable=u.syncErrorThrowable,o.destination=u,u.add(o)}else o.syncErrorThrowable=!0,o.destination=new _(o,e);break}default:o.syncErrorThrowable=!0,o.destination=new _(o,e,n,r)}return o}return i(e,t),e.prototype[m]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(b),_=function(t){function e(e,n,r,i){var u,s=t.call(this)||this;s._parentSubscriber=e;var c=s;return o(n)?u=n:n&&(u=n.next,r=n.error,i=n.complete,n!==a&&(o((c=Object.create(n)).unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=u,s._error=r,s._complete=i,s}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=s.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):c(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;c(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw t;c(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(c(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(w);var x="function"==typeof Symbol&&Symbol.observable||"@@observable";function E(){}function T(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return O(t)}function O(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:E}var S=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof w)return t;if(t[m])return t[m]()}return t||e||n?new w(t,e,n):new w(a)}(t,e,n);if(r?r.call(i,this.source):i.add(this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=j(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[x]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:O(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=j(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function j(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var k=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error),P=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(b),C=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(w),I=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[m]=function(){return new C(this)},e.prototype.lift=function(t){var e=new A(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new k;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new k;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new k;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new k;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new k;return this.hasError?(t.error(this.thrownError),b.EMPTY):this.isStopped?(t.complete(),b.EMPTY):(this.observers.push(t),new P(this,t))},e.prototype.asObservable=function(){var t=new S;return t.source=this,t},e.create=function(t,e){return new A(t,e)},e}(S),A=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):b.EMPTY},e}(I);var M=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new N(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),N=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(w),R=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new b).add(this.source.subscribe(new F(this.getSubject(),this))),t.closed?(this._connection=null,t=b.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return(t=this).lift(new M(t));var t},e}(S),D=R.prototype,F=(D._subscribe,D._isComplete,D.getSubject,D.connect,D.refCount,function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(C));var L=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return i(e,t),e.prototype._subscribe=function(t){var e=new b,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new G(n)),e.add(r.subscribe(t)),e},e}(S),G=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(b),z=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new k;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(I),V=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(b)),Y=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(V),B=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}(),q=function(t){function e(n,r){void 0===r&&(r=B.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(B),H=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(q))(Y),U=new S(function(t){return t.complete()});function $(t){return t?function(t){return new S(function(e){return t.schedule(function(){return e.complete()})})}(t):U}function W(t){return t&&"function"==typeof t.schedule}var X=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}};function Q(t,e){return new S(e?function(n){var r=new b,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:X(t))}function J(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,i=t[t.length-1];switch(W(i)?t.pop():i=void 0,t.length){case 0:return $(i);case 1:return i?Q(t,i):(n=t[0],(r=new S(function(t){t.next(n),t.complete()}))._isScalar=!0,r.value=n,r);default:return Q(t,i)}}function K(t,e){return new S(e?function(n){return e.schedule(Z,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function Z(t){var e=t.error;t.subscriber.error(e)}var tt=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return J(this.value);case"E":return K(this.error);case"C":return $()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var et=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return i(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new nt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(tt.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(tt.createError(t))},e.prototype._complete=function(){this.scheduleMessage(tt.createComplete())},e}(w),nt=function(){return function(t,e){this.notification=t,this.destination=e}}(),rt=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new it(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new k;if(this.isStopped||this.hasError?e=b.EMPTY:(this.observers.push(t),e=new P(this,t)),i&&t.add(t=new et(t,i)),n)for(var u=0;u<o&&!t.closed;u++)t.next(r[u]);else for(u=0;u<o&&!t.closed;u++)t.next(r[u].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||H).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(I),it=function(){return function(t,e){this.time=t,this.value=e}}(),ot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return i(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),b.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),b.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(I),ut=1,st={};var ct=function(t){var e=ut++;return st[e]=t,Promise.resolve().then(function(){return function(t){var e=st[t];e&&e()}(e)}),e},at=function(t){delete st[t]},lt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=ct(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(at(n),e.scheduled=void 0)},e}(V),ft=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(q))(lt),ht=new q(V),dt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(V),pt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(q))(dt),vt=function(t){function e(e,n){void 0===e&&(e=yt),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(q),yt=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return i(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(V);function bt(t){return t}function gt(t){return!!t&&(t instanceof S||"function"==typeof t.lift&&"function"==typeof t.subscribe)}var mt=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error),wt=function(t){function e(){var n=t.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error),_t=function(t){function e(){var n=t.call(this,"Timeout has occurred")||this;return n.name="TimeoutError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error);function xt(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Et(t,e))}}var Et=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Tt(t,this.project,this.thisArg))},t}(),Tt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(w);function Ot(t,e,n){if(e){if(!W(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Ot(t,n).apply(void 0,r).pipe(xt(function(t){return l(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i,o=this,u={context:o,subject:i,callbackFunc:t,scheduler:n};return new S(function(r){if(n){var s={args:e,subscriber:r,params:u};return n.schedule(St,0,s)}if(!i){i=new ot;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.next(t.length<=1?t[0]:t),i.complete()}]))}catch(t){i.error(t)}}return i.subscribe(r)})}}function St(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,u=i.context,s=i.scheduler,c=i.subject;if(!c){c=i.subject=new ot;try{o.apply(u,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(s.schedule(jt,0,{value:r,subject:c}))}]))}catch(t){c.error(t)}}this.add(c.subscribe(r))}function jt(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function kt(t,e,n){if(e){if(!W(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return kt(t,n).apply(void 0,r).pipe(xt(function(t){return l(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new S(function(r){var o=i.context,u=i.subject;if(n)return n.schedule(Pt,0,{params:i,subscriber:r,context:o});if(!u){u=i.subject=new ot;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?u.error(n):(u.next(t.length<=1?t[0]:t),u.complete())}]))}catch(t){u.error(t)}}return u.subscribe(r)})}}function Pt(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,u=n.args,s=n.scheduler,c=n.subject;if(!c){c=n.subject=new ot;try{o.apply(i,u.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(s.schedule(It,0,{err:r,subject:c}));else{var i=t.length<=1?t[0]:t;e.add(s.schedule(Ct,0,{value:i,subject:c}))}}]))}catch(t){this.add(s.schedule(It,0,{err:t,subject:c}))}}this.add(c.subscribe(r))}function Ct(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function It(t){var e=t.err;t.subject.error(e)}var At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(w),Mt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(w),Nt=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,c),e}};var Rt=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Dt=function(t){return function(e){for(var n=t[Rt]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},Ft=function(t){return function(e){var n=t[x]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},Lt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Gt(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var zt=function(t){if(t instanceof S)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[x])return Ft(t);if(Lt(t))return X(t);if(Gt(t))return Nt(t);if(t&&"function"==typeof t[Rt])return Dt(t);var e=f(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Vt(t,e,n,r){var i=new Mt(t,n,r);return zt(e)(i)}var Yt={};function Bt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return W(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),Q(t,r).lift(new qt(n))}var qt=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Ht(t,this.resultSelector))},t}(),Ht=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(e,t),e.prototype._next=function(t){this.values.push(Yt),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Vt(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,u=o[n],s=this.toRespond?u===Yt?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(At);function Ut(t,e){if(!e)return t instanceof S?t:new S(zt(t));if(null!=t){if(function(t){return t&&"function"==typeof t[x]}(t))return function(t,e){return new S(e?function(n){var r=new b;return r.add(e.schedule(function(){var i=t[x]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:Ft(t))}(t,e);if(Gt(t))return function(t,e){return new S(e?function(n){var r=new b;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:Nt(t))}(t,e);if(Lt(t))return Q(t,e);if(function(t){return t&&"function"==typeof t[Rt]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new S(e?function(n){var r,i=new b;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[Rt](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:Dt(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var $t=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Wt(t,this.project,this.concurrent))},t}(),Wt=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Vt(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(At);function Xt(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t(function(t,r){return Ut(e(t,r)).pipe(xt(function(e,i){return n(t,e,r,i)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new $t(e,r))})}(bt,t)}function Qt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&W(t[1])?Ut(t[0]):Xt(1)(J.apply(void 0,t))}function Jt(t){return new S(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Ut(n):$()).subscribe(e)})}function Kt(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),0===e.length?U:t?Kt(e).pipe(xt(function(e){return t.apply(void 0,e)})):new S(function(t){return new Zt(t,e)})}var Zt=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var u=Vt(r,n[o],null,o);u&&r.add(u)}return r}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.values,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()},e}(At);Object.prototype.toString;function te(t,e,n,r){return o(n)&&(r=n,n=void 0),r?te(t,e,n).pipe(xt(function(t){return l(t)?r.apply(void 0,t):r(t)})):new S(function(r){!function t(e,n,r,i,o){var u;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,o),u=function(){return s.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var c=e;e.on(n,r),u=function(){return c.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var a=e;e.addListener(n,r),u=function(){return a.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,f=e.length;l<f;l++)t(e[l],n,r,i,o)}i.add(u)}(t,e,function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)},r,n)})}function ee(t,e,n){return n?ee(t,e).pipe(xt(function(t){return l(t)?n.apply(void 0,t):n(t)})):new S(function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(o(e))return function(){return e(i,r)}})}function ne(t,e,n,r,i){var o,u;if(1==arguments.length){var s=t;u=s.initialState,e=s.condition,n=s.iterate,o=s.resultSelector||bt,i=s.scheduler}else void 0===r||W(r)?(u=t,o=bt,i=r):(u=t,o=r);return new S(function(t){var r=u;if(i)return i.schedule(re,0,{subscriber:t,iterate:n,condition:e,resultSelector:o,state:r});for(;;){if(e){var s=void 0;try{s=e(r)}catch(e){return void t.error(e)}if(!s){t.complete();break}}var c=void 0;try{c=o(r)}catch(e){return void t.error(e)}if(t.next(c),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}})}function re(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function ie(t,e,n){return void 0===e&&(e=U),void 0===n&&(n=U),Jt(function(){return t()?e:n})}function oe(t){return!l(t)&&t-parseFloat(t)+1>=0}function ue(t,e){return void 0===t&&(t=0),void 0===e&&(e=ht),(!oe(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=ht),new S(function(n){return n.add(e.schedule(se,t,{subscriber:n,counter:0,period:t})),n})}function se(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}function ce(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return W(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof S?t[0]:Xt(n)(Q(t,r))}var ae=new S(E);function le(){return ae}function fe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return U;var n=t[0],r=t.slice(1);return 1===t.length&&l(n)?fe.apply(void 0,n):new S(function(t){var e=function(){return t.add(fe.apply(void 0,r).subscribe(t))};return Ut(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}function he(t,e){return new S(e?function(n){var r=Object.keys(t),i=new b;return i.add(e.schedule(de,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function de(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var u=e[n];r.next([u,o[u]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function pe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!l(t[0]))return t[0];t=t[0]}return Q(t,void 0).lift(new ve)}var ve=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ye(t))},t}(),ye=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Vt(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var u=this.subscriptions[o];u.unsubscribe(),this.remove(u)}this.subscriptions=null}this.destination.next(e)},e}(At);function be(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new S(function(r){var i=0,o=t;if(n)return n.schedule(ge,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}})}function ge(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}function me(t,e,n){void 0===t&&(t=0);var r=-1;return oe(e)?r=Number(e)<1?1:Number(e):W(e)&&(n=e),W(n)||(n=ht),new S(function(e){var i=oe(t)?t:+t-n.now();return n.schedule(we,i,{index:0,period:r,subscriber:e})})}function we(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function _e(t,e){return new S(function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?Ut(i):U).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}function xe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Q(t,void 0).lift(new Ee(n))}var Ee=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Te(t,this.resultSelector))},t}(),Te=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return i(e,t),e.prototype._next=function(t){var e=this.iterators;l(t)?e.push(new Se(t)):"function"==typeof t[Rt]?e.push(new Oe(t[Rt]())):e.push(new je(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(u=t[r]).hasValue&&!u.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var u,s=(u=t[r]).next();if(u.hasCompleted()&&(i=!0),s.done)return void n.complete();o.push(s.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(w),Oe=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),Se=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[Rt]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),je=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(e,t),e.prototype[Rt]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Vt(this,this.observable,this,e)},e}(At);n.d(e,"Observable",function(){return S}),n.d(e,"ConnectableObservable",function(){return R}),n.d(e,"GroupedObservable",function(){return L}),n.d(e,"observable",function(){return x}),n.d(e,"Subject",function(){return I}),n.d(e,"BehaviorSubject",function(){return z}),n.d(e,"ReplaySubject",function(){return rt}),n.d(e,"AsyncSubject",function(){return ot}),n.d(e,"asapScheduler",function(){return ft}),n.d(e,"asyncScheduler",function(){return ht}),n.d(e,"queueScheduler",function(){return H}),n.d(e,"animationFrameScheduler",function(){return pt}),n.d(e,"VirtualTimeScheduler",function(){return vt}),n.d(e,"VirtualAction",function(){return yt}),n.d(e,"Scheduler",function(){return B}),n.d(e,"Subscription",function(){return b}),n.d(e,"Subscriber",function(){return w}),n.d(e,"Notification",function(){return tt}),n.d(e,"pipe",function(){return T}),n.d(e,"noop",function(){return E}),n.d(e,"identity",function(){return bt}),n.d(e,"isObservable",function(){return gt}),n.d(e,"ArgumentOutOfRangeError",function(){return mt}),n.d(e,"EmptyError",function(){return wt}),n.d(e,"ObjectUnsubscribedError",function(){return k}),n.d(e,"UnsubscriptionError",function(){return y}),n.d(e,"TimeoutError",function(){return _t}),n.d(e,"bindCallback",function(){return Ot}),n.d(e,"bindNodeCallback",function(){return kt}),n.d(e,"combineLatest",function(){return Bt}),n.d(e,"concat",function(){return Qt}),n.d(e,"defer",function(){return Jt}),n.d(e,"empty",function(){return $}),n.d(e,"forkJoin",function(){return Kt}),n.d(e,"from",function(){return Ut}),n.d(e,"fromEvent",function(){return te}),n.d(e,"fromEventPattern",function(){return ee}),n.d(e,"generate",function(){return ne}),n.d(e,"iif",function(){return ie}),n.d(e,"interval",function(){return ue}),n.d(e,"merge",function(){return ce}),n.d(e,"never",function(){return le}),n.d(e,"of",function(){return J}),n.d(e,"onErrorResumeNext",function(){return fe}),n.d(e,"pairs",function(){return he}),n.d(e,"race",function(){return pe}),n.d(e,"range",function(){return be}),n.d(e,"throwError",function(){return K}),n.d(e,"timer",function(){return me}),n.d(e,"using",function(){return _e}),n.d(e,"zip",function(){return xe}),n.d(e,"EMPTY",function(){return U}),n.d(e,"NEVER",function(){return ae}),n.d(e,"config",function(){return s})},function(t){t.exports={name:"1-1",ground:[[-1,-2],[0,-2],[1,-2],[-1,-1],[0,-1],[1,-1],[-2,0],[-1,0],[0,0],[1,0],[2,0],[-2,1],[-1,1],[0,1],[1,1],[3,1],[4,1],[5,1]],bombs:[[4,0]],jumps:[],prize:[[-1,2]]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),u=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"shine"));return n.size=t,n.speed=5,n.timer=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),i(e,[{key:"update",value:function(t,e){var n=(Math.sin(this.timer)+1)/2;t.size=n<.25?.8*this.size:this.size,this.timer+=e*this.speed}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=s(n(3)),o=s(n(2)),u=s(n(11));function s(t){return t&&t.__esModule?t:{default:t}}var c=15916080;e.default=function(t,e,n){var s=new i.default("prize",c);return s.graphics.filters=[new r.GlowFilter(10,1,0,c)],t.prize&&t.prize.forEach(function(t){var n=new o.default(e.gridToLocal(t[0]),e.gridToLocal(t[1]),e.size);n.addTrait(new u.default(e.size)),s.append(n)}),s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),u=(r=o)&&r.__esModule?r:{default:r},s=n(2);var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"jump"));return t.velocity=200,t.duration=.3,t.gracePeriod=.1,t.ready=0,t.requestTime=0,t.engageTime=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),i(e,[{key:"start",value:function(){this.requestTime=this.gracePeriod}},{key:"cancel",value:function(){this.requestTime=0,this.engageTime=0}},{key:"update",value:function(t,e){this.requestTime>0&&(this.ready>0&&(this.engageTime=this.duration,this.requestTime=0),this.requestTime-=e),this.engageTime>0&&(t.vel.y=-this.velocity,this.engageTime-=e),this.ready--}},{key:"obstruct",value:function(t,e){e.local===s.EDGE.BOTTOM?this.ready=1:e.local===s.EDGE.TOP&&this.cancel()}},{key:"falling",get:function(){return this.ready<0}}]),e}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),u=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"move"));return t.dir=0,t.acceleration=500,t.deceleration=300,t.dragFactor=.95,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),i(e,[{key:"update",value:function(t,e){var n=Math.abs(t.vel.x);if(0!==this.dir)t.vel.x+=this.acceleration*e*this.dir;else if(0!==t.vel.x){var r=Math.min(n,this.deceleration*e);t.vel.x+=t.vel.x>0?-r:r}t.vel.x*=this.dragFactor}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),u=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"killable"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),i(e,[{key:"obstruct",value:function(t,e,n){"bombs"===n.parent.name&&n.explosive.start(t)}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DIR_SHIFT=e.DIR=void 0;var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=c(n(1)),u=n(2),s=c(n(4));function c(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=e.DIR={TOP:Symbol("top"),RIGHT:Symbol("right"),BOTTOM:Symbol("bottom"),LEFT:Symbol("left")},f=e.DIR_SHIFT=(a(r={},l.TOP,2),a(r,l.RIGHT,1),a(r,l.BOTTOM,0),a(r,l.LEFT,3),r),h=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"physics"));return t.gravity=1e3,t.dir=l.BOTTOM,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"update",value:function(t,e){this.checkDirection(t);var n=this.rotateVector(t.vel).x;t.pos.x+=n*e,this.checkX(t,n);var r=this.rotateVector(t.vel).y;t.pos.y+=r*e,this.checkY(t,r),t.vel.y+=this.gravity*e}},{key:"checkX",value:function(t,e){var n=this;(0,s.default)(t.parent.level.solids,function(r){r.forEach(function(r){t.intersection(r)&&(e>0?t.right>r.left&&t.obstruct(n.rotateEdge(u.EDGE.RIGHT),r):e<0&&t.left<r.right&&t.obstruct(n.rotateEdge(u.EDGE.LEFT),r))})})}},{key:"checkY",value:function(t,e){var n=this;(0,s.default)(t.parent.level.solids,function(r){r.forEach(function(r){t.intersection(r)&&(e>0?t.bottom>r.top&&t.obstruct(n.rotateEdge(u.EDGE.BOTTOM),r):e<0&&(n.shouldAlignCorner(t,r)&&(t.right=r.left),t.top<r.bottom&&t.obstruct(n.rotateEdge(u.EDGE.TOP),r)))})})}},{key:"checkDirection",value:function(t){var e=t.parent.level.forces,n=this.dir;e.inTop(t.pos)?this.dir=l.BOTTOM:e.inBottom(t.pos)?this.dir=l.TOP:e.inLeft(t.pos)?this.dir=l.RIGHT:e.inRight(t.pos)&&(this.dir=l.LEFT),this.dir!==n&&(t.vel.x*=1.5,t.vel.y*=.5)}},{key:"obstruct",value:function(t,e,n){e.global===u.EDGE.BOTTOM?(t.bottom=n.top,t.vel[this.isVertical?"y":"x"]=0):e.global===u.EDGE.TOP?(t.top=n.bottom,t.vel[this.isVertical?"y":"x"]=0):e.global===u.EDGE.LEFT?(t.left=n.right,t.vel[this.isVertical?"x":"y"]=0):e.global===u.EDGE.RIGHT&&(t.right=n.left,t.vel[this.isVertical?"x":"y"]=0)}},{key:"rotateVector",value:function(t){var e=t.x,n=t.y;switch(this.dir){case l.TOP:return{x:-e,y:-n};case l.BOTTOM:default:return{x:e,y:n};case l.LEFT:return{x:-n,y:e};case l.RIGHT:return{x:n,y:-e}}}},{key:"rotateEdge",value:function(t){var e=u.EDGE_TABLE.indexOf(t);if(-1!==e){var n=(e+f[this.dir])%u.EDGE_TABLE.length;return{global:u.EDGE_TABLE[e],local:u.EDGE_TABLE[n]}}return{global:u.EDGE.BOTTOM,local:u.EDGE.BOTTOM}}},{key:"shouldAlignCorner",value:function(t,e){return t.left-e.right<2&&t.right-e.left<2}},{key:"isVertical",get:function(){return this.dir===l.TOP||this.dir===l.BOTTOM}}]),e}();e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.states=new Map,this.events=new Map,this.listenTo(e)}return r(t,[{key:"on",value:function(t,e){this.events.set(t,e)}},{key:"handleEvent",value:function(t){t.preventDefault();var e=t.code;if(this.events.has(e)){var n="keydown"===t.type?1:0;this.states.get(e)!==n&&(this.states.set(e,n),this.events.get(e)(n))}}},{key:"listenTo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;["keydown","keyup"].forEach(function(n){e.addEventListener(n,function(e){t.handleEvent(e)})})}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n(17)),i=l(n(3)),o=l(n(2)),u=l(n(16)),s=l(n(15)),c=l(n(14)),a=l(n(13));function l(t){return t&&t.__esModule?t:{default:t}}var f=64899;e.default=function(t,e,n){var l=new i.default("player",f),h=new o.default(0,-250,e.size);l.append(h),h.addTrait(new u.default),h.addTrait(new s.default),h.addTrait(new c.default),h.addTrait(new a.default);var d=new r.default;return d.on("ArrowRight",function(t){h.move.dir+=t?1:-1}),d.on("ArrowLeft",function(t){h.move.dir+=t?-1:1}),d.on("Space",function(t){t?h.jump.start():h.jump.cancel()}),l}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(3)),i=o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}var u=14227063;e.default=function(t,e,n){var o=new r.default("ground",u);return o.solid=!0,t.ground&&t.ground.forEach(function(t){var n=new i.default(e.gridToLocal(t[0]),e.gridToLocal(t[1]),e.size);o.append(n)}),o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(6),o=n(3),u=(r=o)&&r.__esModule?r:{default:r};var s=16777215;e.default=function(t,e,n){var r=new u.default("effects",s);return r.graphics.filters=[new i.GlowFilter(15,1,0,s)],r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.frames=n,this.loop=r,this.stop()}return r(t,[{key:"load",value:function(){this.frameIndex=-1,this.frameTime=0,this.time=0}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1}},{key:"stop",value:function(){this.load(),this.pause()}},{key:"nextFrame",value:function(){++this.frameIndex<this.frames.length?this.frameTime=this.frames[this.frameIndex][0]:this.loop?this.load():this.stop()}},{key:"update",value:function(t){this.frameIndex<0&&this.nextFrame(),this.time>=this.frameTime&&(this.frames[this.frameIndex][1](this.frameIndex,t),this.nextFrame()),this.time+=t}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(21)),o=u(n(1));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"animation"));return t.keyframes=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),r(e,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.keyframes.push(new i.default(t,e,n)),this}},{key:"play",value:function(t,e,n){void 0!==e&&this.add(t,e,n);var r=this.keyframes.filter(function(e){return e.name===t});return void 0!==r[0]&&r[0].play(),this}},{key:"update",value:function(t,e){for(var n=-1,r=this.keyframes.length;++n<r;)this.keyframes[n].playing&&this.keyframes[n].update(e)}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),u=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.15;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"blink"));return n.freq=t,n.time=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),i(e,[{key:"update",value:function(t,e){this.time>this.freq&&(t.visible=!t.visible,this.time=0),this.time+=e}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=l(n(4)),o=l(n(2)),u=l(n(1)),s=l(n(23)),c=l(n(22)),a=n(7);function l(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"explosive"));return n.range=t,n.timer=.25,n.ignition=-1,n.exploded=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),r(e,[{key:"start",value:function(){this.ignition++}},{key:"update",value:function(t,e){if(this.ignition<0||this.exploded)return!1;if(0===this.ignition)t.addTrait(new s.default(.1)),this.ignition++;else if(this.timer<0){this.exploded=!0;var n=t.parent.level;n.layers.effects.append(this.createFlash(t)),this.affect(t,[n.layers.ground,n.layers.player]).forEach(this.destroy),this.destroy(t),n.layers.player.head?n.forces.calculate(n.solids):setTimeout(function(){return n.global.state.dispatch((0,a.loseLife)())},1e3)}this.timer-=e}},{key:"createFlash",value:function(t){var e=this,n=new o.default(t.pos.x,t.pos.y,t.size);return n.addTrait(new c.default),n.animation.play("flash",[[.01,function(){return n.size+=e.range}],[.1,function(){return n.size+=e.range}],[.18,function(){return n.size-=e.range/2}],[.2,function(){return e.destroy(n)}]]),n}},{key:"affect",value:function(t,e){var n=this,r=[];return(0,i.default)(e,function(e){e.forEach(function(e){n.intersection(t,e)&&r.push(e)})}),r}},{key:"destroy",value:function(t){t.parent.remove(t)}},{key:"intersection",value:function(t,e){return t.top-this.range<e.bottom&&t.bottom+this.range>e.top&&t.right+this.range>e.left&&t.left-this.range<e.right}}]),e}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e||0,this.y=n||0}return r(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"subtract",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"divide",value:function(t){return this.x=t.x?this.x*(1/t.x):0,this.y=t.y?this.y*(1/t.y):0,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divideScalar",value:function(t){if(0===t)this.x=0,this.y=0;else{var e=1/t;this.x*=e,this.y*=e}return this}},{key:"invert",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"limit",value:function(t){return this.length>t&&(this.length=t),this}},{key:"rotate",value:function(t){var e=this.x;return this.x=this.x*Math.cos(t)-this.y*Math.sin(t),this.y=e*Math.sin(t)+this.y*Math.cos(t),this}},{key:"normalize",value:function(){return this.divideScalar(this.length)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"distanceSq",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSq(t))}},{key:"lengthSq",get:function(){return this.dot(this)}},{key:"length",get:function(){return Math.sqrt(this.lengthSq)},set:function(t){var e=this.length;0!==e&&t!==e&&this.multiplyScalar(t/e)}},{key:"rad",get:function(){return Math.atan2(this.x,this.y)},set:function(t){this.set(Math.cos(t)*this.length,Math.sin(t)*this.length)}},{key:"deg",get:function(){return 180*this.rad/Math.PI},set:function(t){this.rad=t*Math.PI/180}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(3)),i=u(n(2)),o=u(n(24));function u(t){return t&&t.__esModule?t:{default:t}}var s=738980;e.default=function(t,e,n){var u=new r.default("bombs",s);return u.solid=!0,t.bombs&&t.bombs.forEach(function(t){var n=new i.default(e.gridToLocal(t[0]),e.gridToLocal(t[1]),e.size);n.addTrait(new o.default(e.size)),u.append(n)}),u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0);var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sprite=new i.extras.TilingSprite(e)}return r(t,[{key:"resize",value:function(t){console.log(this)}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(4),u=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.radius=e,this.bounds={}}return i(t,[{key:"inTop",value:function(t){return t.x>this.bounds.left&&t.x<this.bounds.right&&t.y<this.bounds.top}},{key:"inRight",value:function(t){return t.y>this.bounds.top&&t.y<this.bounds.bottom&&t.x>this.bounds.right}},{key:"inBottom",value:function(t){return t.x>this.bounds.left&&t.x<this.bounds.right&&t.y>this.bounds.bottom}},{key:"inLeft",value:function(t){return t.y>this.bounds.top&&t.y<this.bounds.bottom&&t.x<this.bounds.left}},{key:"calculate",value:function(t){var e=this,n=0,r=0;(0,u.default)(t,function(t){t.forEach(function(t){t.left<n&&(n=t.left),t.right>r&&(r=t.right)})});var i=0,o=0,s=0,c=0;(0,u.default)(t,function(t){t.forEach(function(t){t.pos.x<n+e.radius?(t.top<i&&(i=t.top),t.bottom>s&&(s=t.bottom)):t.pos.x>r-e.radius&&(t.top<o&&(o=t.top),t.bottom>c&&(c=t.bottom))})}),this.bounds={top:Math.max(i,o),bottom:Math.min(s,c),left:n,right:r}}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.x-=e,t.y-=e,t.width+=2*e,t.height+=2*e,t}},function(t,e,n){"use strict";n.r(e),n.d(e,"RGBSplitFilter",function(){return u});var r=n(0),i="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",o="precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",u=function(t){function e(e,n,r){void 0===e&&(e=[-10,0]),void 0===n&&(n=[0,10]),void 0===r&&(r=[0,0]),t.call(this,i,o),this.red=e,this.green=n,this.blue=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return n.red.get=function(){return this.uniforms.red},n.red.set=function(t){this.uniforms.red=t},n.green.get=function(){return this.uniforms.green},n.green.set=function(t){this.uniforms.green=t},n.blue.get=function(){return this.uniforms.blue},n.blue.set=function(t){this.uniforms.blue=t},Object.defineProperties(e.prototype,n),e}(r.Filter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(30),u=p(n(29)),s=p(n(4)),c=p(n(28)),a=(p(n(27)),p(n(26))),l=p(n(20)),f=p(n(19)),h=p(n(18)),d=p(n(12));function p(t){return t&&t.__esModule?t:{default:t}}var v=[f.default,a.default,d.default,l.default,h.default],y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e.name,this.data=e,this.global=null,this.layers={},this.layerNames=[],this.solids=[],this.forces=new c.default,this._foreground=new i.Container,this._background=new i.Container,this._container=new i.Container,this._container.addChild(this._background),this._container.addChild(this._foreground),this._foreground.filters=[new o.RGBSplitFilter([1,0],[-1,0],[0,2]),new i.filters.BlurFilter(.25)];var n=new i.extras.TilingSprite(i.loader.resources.space.texture);this._background.addChild(n)}return r(t,[{key:"onMount",value:function(t){var e=this;this.create(),this.fitBackground(),this.forces.radius=t.size,this.forces.calculate(this.solids),this.handlePlayerDeath=t.onPlayerDeath$.subscribe(function(){e.clear(),e.create()}),this.handleResize=t.onResize$.subscribe(function(){e.fitBackground()})}},{key:"onUnmount",value:function(t){this.clear(),this.handlePlayerDeath.unsubscribe(),this.handleResize.unsubscribe()}},{key:"create",value:function(){var t=this;v.forEach(function(e){var n=e(t.data,t.global,t);t._foreground.addChild(n.graphics),t.layers[n.name]=n,t.layerNames.push(n.name),n.level=t,n.solid&&t.solids.push(n)})}},{key:"update",value:function(t){var e=this;this.fitForegroundArea(),(0,s.default)(this.layerNames,function(n){e.layers[n].update(t)})}},{key:"render",value:function(t){var e=this;(0,s.default)(this.layerNames,function(n){e.layers[n].render(t)})}},{key:"clear",value:function(){for(this.layerNames=[];this._foreground.children[0];)this._foreground.removeChild(this._foreground.children[0])}},{key:"fitForegroundArea",value:function(){var t=this._foreground.getBounds();this._foreground.filterArea=(0,u.default)(t,10)}},{key:"fitBackground",value:function(){var t=this.global.app.screen;this._background.children.forEach(function(e){e.width=t.width,e.height=t.height,e.tileScale.y=t.height/e.texture.height})}},{key:"inRange",value:function(t,e,n){console.log(t)}}]),t}();e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.emit=function(){return t.next.apply(t,n)},t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(9),u=n(32),s=(r=u)&&r.__esModule?r:{default:r};var c=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.app=e,this.state=n,this.level=null,this.size=i,this.time=1/60,this.onStateChange$=(0,o.from)(n),this.onPlayerDeath$=(0,s.default)(new o.Subject,this),this.onLevelClear$=(0,s.default)(new o.Subject,this),this.onGameOver$=(0,s.default)(new o.Subject,this),this.onResize$=(0,o.fromEvent)(window,"resize"),this.onResize$.subscribe(function(){return r.resize()}),this.resize();var u=n;this.onStateChange$.subscribe(function(t){u.lives>t.lives&&r.onPlayerDeath$.emit(),t.lives<0&&r.onGameOver$.emit(),u=t}),this.onGameOver$.subscribe(function(){console.log("game over!")}),console.log(this)}return i(t,[{key:"resize",value:function(){this.app.renderer.resize(window.innerWidth,window.innerHeight),this.rootX=this.app.screen.width/2,this.rootY=this.app.screen.height/2}},{key:"mount",value:function(t){null!==this.level&&this.unmount(),this.app.stage.addChild(t._container),this.level=t,t.global=this,t.onMount(this)}},{key:"unmount",value:function(){this.app.stage.removeChild(this.level._container),this.level.onUnmount(this),this.level.global=null,this.level=null}},{key:"gridToLocal",value:function(t){return t*this.size}},{key:"localToGrid",value:function(t){return Math.round(t/this.size)||0}},{key:"globalToLocalX",value:function(t){return t-this.rootX}},{key:"globalToLocalY",value:function(t){return t-this.rootY}},{key:"globalToGridX",value:function(t){return this.localToGrid(this.globalToLocalX(t))}},{key:"globalToGridY",value:function(t){return this.localToGrid(this.globalToLocalY(t))}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.livesReducer=e.scoreReducer=void 0;var r=n(7);e.scoreReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1];switch(e.type){case r.GAIN_SCORE:return t+e.value||100;case r.LOSE_SCORE:return t-e.value||100;case r.RESET_SCORE:return 0;default:return t}},e.livesReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;switch(arguments[1].type){case r.GAIN_LIFE:return t+1;case r.LOSE_LIFE:return t-1;case r.RESET_LIVES:return 3;default:return t}}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"createStore",function(){return c}),n.d(e,"combineReducers",function(){return l}),n.d(e,"bindActionCreators",function(){return h}),n.d(e,"applyMiddleware",function(){return p}),n.d(e,"compose",function(){return d}),n.d(e,"__DO_NOT_USE__ActionTypes",function(){return i});var r=n(5),i={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function s(t){if("object"!==(void 0===t?"undefined":o(t))||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function c(t,e,n){var u;if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(c)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var a=t,l=e,f=[],h=f,d=!1;function p(){h===f&&(h=f.slice())}function v(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function y(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return p(),h.push(t),function(){if(e){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,p();var n=h.indexOf(t);h.splice(n,1)}}}function b(t){if(!s(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,l=a(l,t)}finally{d=!1}for(var e=f=h,n=0;n<e.length;n++){(0,e[n])()}return t}return b({type:i.INIT}),(u={dispatch:b,subscribe:y,getState:v,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");a=t,b({type:i.REPLACE})}})[r.a]=function(){var t,e=y;return(t={subscribe:function(t){if("object"!==(void 0===t?"undefined":o(t))||null===t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(v())}return n(),{unsubscribe:e(n)}}})[r.a]=function(){return this},t},u}function a(t,e){var n=e&&e.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function l(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var o=e[r];0,"function"==typeof t[o]&&(n[o]=t[o])}var u=Object.keys(n);var s=void 0;try{!function(t){Object.keys(t).forEach(function(e){var n=t[e];if(void 0===n(void 0,{type:i.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(t){s=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(s)throw s;for(var r=!1,i={},o=0;o<u.length;o++){var c=u[o],l=n[c],f=t[c],h=l(f,e);if(void 0===h){var d=a(c,e);throw new Error(d)}i[c]=h,r=r||h!==f}return r?i:t}}function f(t,e){return function(){return e(t.apply(this,arguments))}}function h(t,e){if("function"==typeof t)return f(t,e);if("object"!==(void 0===t?"undefined":o(t))||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":void 0===t?"undefined":o(t))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var u=n[i],s=t[u];"function"==typeof s&&(r[u]=f(s,e))}return r}function d(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function p(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=t.apply(void 0,r),s=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},c={getState:o.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(t){return t(c)});return s=d.apply(void 0,a)(o.dispatch),u({},o,{dispatch:s})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(37),i=n(34);e.default=(0,r.createStore)((0,r.combineReducers)({score:i.scoreReducer,lives:i.livesReducer}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=new(n(0).Application)({width:window.innerWidth,height:window.innerHeight,backgroundColor:1186884});document.body.appendChild(r.view),e.default=r},function(t,e,n){"use strict";var r=n(0),i=a(n(39)),o=a(n(38)),u=a(n(33)),s=a(n(31)),c=a(n(10));function a(t){return t&&t.__esModule?t:{default:t}}r.loader.add([{name:"space",url:"images/space.png"}]).on("complete",function(){var t=new u.default(i.default,o.default,24),e=new s.default(c.default);t.mount(e),i.default.ticker.add(function(n){var r=t.time*n;e.update(r),e.render(t)})}).load()}]);